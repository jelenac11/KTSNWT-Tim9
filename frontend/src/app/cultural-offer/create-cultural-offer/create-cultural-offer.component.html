<div class="content" role="main">
  <mdb-card>
    <mdb-card-body>
      <div class="text-center border border-light p-3">
        <div class="row">
          <div class="col-7">
            <mdb-card>
              <mdb-card-body>
                <app-map
                  [latitude]="
                    registerForm.get('location').value?.geometry?.location.lat()
                  "
                  [longitude]="
                    registerForm.get('location').value?.geometry?.location.lng()
                  "
                  [showInfoWindow]="false"
                  [zoom]="zoom"
                  [data]="[location]"
                  [markerZoom]="markerZoom"
                >
                </app-map>
              </mdb-card-body>
            </mdb-card>
          </div>
          <div class="col-5">
            <p class="h4 mb-4">Create new cultural offer</p>
            <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
              <div class="form-group">
                <label>Name</label>
                <input
                  type="text"
                  formControlName="name"
                  class="form-control"
                  [ngClass]="{ 'is-invalid': submitted && f.name.errors }"
                />
                <div
                  *ngIf="submitted && f.name.errors"
                  class="invalid-feedback"
                >
                  <div *ngIf="f.name.errors.required">Name is required</div>
                </div>
              </div>
              <div class="form-group">
                <label>Location</label>
                <input
                  type="text"
                  formControlName="location"
                  class="form-control"
                  matInput
                  matGoogleMapsAutocomplete
                  [ngClass]="{ 'is-invalid': submitted && f.location.errors }"
                  (onAutocompleteSelected)="onAutocompleteSelected($event)"
                  placeholder="Type city or adress ..."
                  [value]="loc"
                />
                <div
                  *ngIf="submitted && f.name.errors"
                  class="invalid-feedback"
                >
                  <div *ngIf="f.name.errors.required">Location is required</div>
                  <div *ngIf="f.name.errors.locationNameValid">
                    Invalid location
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label>Category</label>
                <select
                  class="form-control"
                  formControlName="category"
                  [ngClass]="{ 'is-invalid': submitted && f.category.errors }"
                >
                  <option
                    *ngFor="let category of categories"
                    [value]="category.id"
                  >
                    {{ category.name }}
                  </option>
                </select>
                <div
                  *ngIf="submitted && f.category.errors"
                  class="invalid-feedback"
                >
                  <div *ngIf="f.category.errors.required">
                    Category is required
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label>Description</label>
                <textarea
                  formControlName="description"
                  class="form-control"
                  placeholder="Write some description..."
                  rows="5"
                ></textarea>
              </div>
              <div class="form-group">
                <img
                  [src]="uploadedImage || defaultImage"
                  alt=""
                  [width]="200"
                  [height]="200"
                />
                <input
                  type="file"
                  accept="image/jpeg"
                  (change)="chooseFile($event)"
                  [ngClass]="{
                    'is-invalid': submitted && f.file.errors
                  }"
                />
                <div
                  *ngIf="submitted && f.file.errors"
                  class="invalid-feedback"
                >
                  <div *ngIf="f.file.errors.required">Image is required</div>
                </div>
              </div>
              <div class="form-group">
                <button type="submit" class="btn btn-primary">Create</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </mdb-card-body>
  </mdb-card>
</div>
