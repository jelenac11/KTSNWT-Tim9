<div class="content" role="main">
  <mdb-card>
    <mdb-card-body>
      <div class="text-center border border-light p-3">
        <div class="row">
          <div class="col-7">
            <mdb-card>
              <mdb-card-body>
                <app-map
                  [latitude]="markerCoordinates.geolocation.lat"
                  [longitude]="markerCoordinates.geolocation.lon"
                  [showInfoWindow]="false"
                  [zoom]="zoom"
                  [data]="[markerCoordinates]"
                >
                </app-map>
              </mdb-card-body>
            </mdb-card>
          </div>
          <div class="col-5">
            <p class="h4 mb-4" *ngIf="!id">Create new cultural offer</p>
            <p class="h4 mb-4" *ngIf="id">Update cultural offer</p>
            <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
              <div class="form-group">
                <label>Name</label>
                <input
                  id="culturalOffer_name_input"
                  type="text"
                  formControlName="name"
                  class="form-control"
                  [ngClass]="{ 'is-invalid': submitted && f.name.errors }"
                />
                <div
                  *ngIf="submitted && f.name.errors"
                  class="invalid-feedback"
                >
                  <div *ngIf="f.name.errors.required">Name is required</div>
                </div>
              </div>
              <div class="form-group">
                <label>Location</label>
                <input
                  id="culturalOffer_location_input"
                  [value]="loc"
                  type="text"
                  formControlName="location"
                  class="form-control"
                  matInput
                  matGoogleMapsAutocomplete
                  [ngClass]="{ 'is-invalid': submitted && f.location.errors }"
                  placeholder="Type city or adress ..."
                  (onAutocompleteSelected)="onAutocompleteSelected($event)"
                />
                <div
                  *ngIf="submitted && f.name.errors"
                  class="invalid-feedback"
                >
                  <div *ngIf="f.name.errors.required">Location is required</div>
                  <div *ngIf="f.name.errors.locationNameValid">
                    Invalid location
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label>Category</label>
                <select
                  id="select_category"
                  class="form-control"
                  formControlName="category"
                  [ngClass]="{ 'is-invalid': submitted && f.category.errors }"
                >
                  <option
                    [id]="'select_category_'+category.id"
                    *ngFor="let category of categories"
                    [value]="category.id"
                  >
                    {{ category.name }}
                  </option>
                </select>
                <div
                  *ngIf="submitted && f.category.errors"
                  class="invalid-feedback"
                >
                  <div *ngIf="f.category.errors.required">
                    Category is required
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label>Description</label>
                <textarea
                  id="culturalOffer_description_input"
                  formControlName="description"
                  class="form-control"
                  placeholder="Write some description..."
                  rows="5"
                ></textarea>
              </div>
              <div class="form-group">
                <img
                  [src]="uploadedImage || '../assets/noimage.jpg'"
                  alt=""
                  [width]="200"
                  [height]="200"
                />
                <input
                  id="culturalOffer_image_file_select"
                  type="file"
                  accept="image/jpeg, image/jpg"
                  (change)="chooseFile($event)"
                  [ngClass]="{
                    'is-invalid': submitted && f.file.errors
                  }"
                />
                <div
                  *ngIf="submitted && f.file.errors"
                  class="invalid-feedback"
                >
                  <div *ngIf="f.file.errors.required">Image is required</div>
                </div>
              </div>
              <div class="form-group">
                <button
                  id="create_culturalOffer_button"
                  type="submit"
                  class="mat-raised-button mat-primary"
                  *ngIf="!id"
                >
                  Create
                </button>
                <button
                  id="update_culturalOffer_button"
                  type="submit"
                  class="mat-raised-button mat-primary"
                  *ngIf="id"
                >
                  Update
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </mdb-card-body>
  </mdb-card>
</div>
